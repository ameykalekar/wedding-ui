<div style="color:grey;border-bottom:solid grey">
  <h4>Create Ticket</h4>
</div>
<div style="margin-top: 10px;padding-left:10px">
    <div class="col s6 z-depth-1" id="panell">
        <div *ngIf="success" class="card-panel  green "
				style="padding: 5px; margin: 10px">
				<span class="white-text">Successfully Saved Product and Part</span>
			</div>
  <div class="row">
    <form [formGroup]="form" (ngSubmit)="onSubmit()" class="col s12">

        <div class="row" >
      <div class="input-field col s6">
        <select name="singleSelect" formControlName="producttype" name="selectedOption"
         materialize="material_select" [materializeSelectOptions]="selectOptions" (change)="getProductCategory(form.value.producttype)"
          >
          <option value="" disabled selected>Select Type Of Product</option>
          <option *ngFor="let option of selectProductType" [value]="option.value">{{option.name}}</option>
        </select>
   
      </div>
      </div>
      <div class="row" *ngIf="selectProductCategory?.length > 0">
        <div class="input-field col s6">
          <select name="singleSelect" formControlName="category" name="selectedOption"
           materialize="material_select" [materializeSelectOptions]="selectOptions"  (change)="getProductSubCategory(form.value.category)"
            >
            <option value="" disabled selected>Select Product Category</option>
            <option *ngFor="let option of selectProductCategory" [value]="option.value">{{option.name}}</option>
          </select>
     
        </div>
        </div>

        <div class="row" *ngIf="selectProductSubCategory?.length > 0">
          <div class="input-field col s6">
            <select name="singleSelect" formControlName="subcategory" name="selectedOption"
             materialize="material_select" [materializeSelectOptions]="selectOptions" (change)="getProductCompany(form.value.category,form.value.subcategory)"
              >
              <option value="" disabled selected>Select Product SubCategory</option>
              <option *ngFor="let option of selectProductSubCategory" [value]="option.value">{{option.name}}</option>
            </select>
       
          </div>
          </div>
          <div class="row"  *ngIf="selectProductCompany?.length > 0">
            <div class="input-field col s6">
              <select name="singleSelect" formControlName="productid" name="selectedOption"
               materialize="material_select" [materializeSelectOptions]="selectOptions" (change)="getProducts(form.value.producttype,form.value.category,form.value.subcategory,form.value.productid)"
                >
                <option value="" disabled selected>Select Product Brand</option>
                <option *ngFor="let option of selectProductCompany" [value]="option.value">{{option.name}}</option>
              </select>
         
            </div>
            </div>
            <div class="row" >
            <div  *ngIf="productnotfound">
              <label>No Product Found</label>
            </div>
          <div *ngIf="selectProductProducts?.length > 0">
            <div class="input-field col s6">
              <select name="singleSelect" formControlName="productid" name="selectedOption"
               materialize="material_select" [materializeSelectOptions]="selectOptions"
               (change) ="getChecklist(form.value.productid)">
                <option value="" disabled selected>Select Product Name</option>
                <option *ngFor="let option of selectProductProducts" [value]="option.value">{{option.name}}</option>
              </select>
         
            </div>
            </div>
          </div>

          <div *ngIf="checklistnotfound" class="card-panel  red "
				style="padding: 5px; margin: 10px">
				<span class="white-text">Part Not Associate with this product</span>
			</div>
          
            <div *ngIf="checklist" class="card-panel "> 
               
              <blockquote>
               Below Part is all ready Associated with Product.
              </blockquote>
              <div class="row " *ngIf="existingtaskList?.length > 0">
                <ul class="collection with-header hoverable " >
                  <li class="collection-header  teal accent-3"><h4>  {{checklist.checkListName}}</h4></li>
                  <li *ngFor="let item of existingtaskList" class="collection-item">{{item.name}}</li>
                  
                </ul>
           </div>
              
            </div>
            <div class="card-panel" *ngIf="selectCheckList?.length > 0 " >
                <blockquote>
                    To Change Part Association ,Please select new part from dropdown.
                   </blockquote>
              <div class="input-field " >
                <select name="singleSelect" formControlName="checklistid" name="selectedOption"
                 materialize="material_select" [materializeSelectOptions]="selectOptions" (change)="getTasks(form.value.checklistid)"
                  >
                  <option value="" disabled selected>Select New Part</option>
                  <option *ngFor="let option of selectCheckList" [value]="option.value">{{option.name}}</option>
                </select>
               
                
              </div>
              

              <div class="row" *ngIf="taskList?.length > 0">
                  <ul class="collection with-header " >
                    <li class="collection-header red darken-1"><h4>Part Details</h4></li>
                    <li *ngFor="let item of taskList" class="collection-item">{{item.name}}
                        <table>
                            <thead>
                              <tr>
                                  <th>Name</th>
                                  <th>Values</th>
                                   
                                   </tr>
                            </thead>
                    
                            <tbody>
                              <tr>
                                  <td>Name</td>
                                <td>{{item.partName}}</td>
                               
                              </tr>
                              <tr>
                                  <td>Product Brand</td>
                                  <td>{{item.partBrand}}</td>  
                              </tr>
                              <tr>
                                  <td>Part Type</td>
                                  <td>{{item.partType}}</td>
                                  
                              </tr>
                              <tr>
                                  <td>Category</td>
                                  <td>{{item.category}}</td>
                                </tr>
                                <tr>
                                    <td>SubCategory</td>
                                    <td>{{item.subCategory}}</td>
                                  </tr>
                                  <tr>
                                      <td>Price</td>
                                      <td>{{item.price}}</td>
                                    </tr>
                                    <tr>
                                        <td>Comments</td>
                                        <td>{{item.comments}}</td>
                                      </tr>
                               </tbody>
                          </table>
                    </li>
                    <li>
                        <div class="col s12">
                            <a class="btn-floating btn-large  green" style="margin :20px;margin-left: 45%"(click)="addpart()"><i class="material-icons">add</i></a>
                
                  </div>
                    </li>
                  </ul>
             </div>

             <div class="row" *ngIf="selectedparts?.length > 0">
              <ul class="collection with-header " >
                <li class="collection-header green darken-1"><h4 >New Part Names</h4></li>
                <li  *ngFor="let part of selectedparts ;let i = index" class="collection-item "><span> 
                  {{part.partName}}</span> <a><i class="small material-icons deletetask  " (click)="deletepart(i)" >delete</i></a></li> 
                
              </ul>
         </div>
           
            </div>

          
      <button class="waves-effect waves-light btn " id="loginbtn" [disabled]="!form.valid">Associate Checklist</button>
      <button class="waves-effect waves-light btn reset " id="reset" (click)="reset()">Reset</button>
    </form>



  </div>
</div>
</div>